<!DOCTYPE html>
<html lang="en">
<head prefix="og: http://ogp.me/ns#">
  <meta charset="utf-8">
  <title>Networking | Moleculer Go - Progressive microservices framework in Go</title>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="keywords" content="microservices, nodejs, node.js, javascript, github, opensource, framework, moleculer, github, scaling">
  <meta name="description" content="Moleculer is a fast, scalable and powerful microservices framework for Node.js.">
  <meta name="robots" content="index, follow">
  <!-- Canonical links -->
  <link rel="canonical" href="https://gomicro.services/docs/0.1/networking.html">
  <!-- Alternative links -->
  
    
      <link rel="alternative" hreflang="en" href="https://gomicro.services/docs/0.1/networking.html">
    
  
  <!-- Icon -->
  <link rel="apple-touch-icon" sizes="57x57" href="/icon/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icon/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icon/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icon/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icon/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icon/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icon/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icon/apple-touch-icon-152x152.png">
  <link rel="icon" type="image/png" href="/icon/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="/icon/favicon-16x16.png" sizes="16x16">
  <link rel="icon" type="image/png" href="/icon/favicon-32x32.png" sizes="32x32">
  <meta name="msapplication-TileColor" content="#2f83cd">
  <meta name="msapplication-TileImage" content="/icon/mstile-144x144.png">
  <!-- CSS -->
  <!-- build:css build/css/moleculer.css -->
  <link rel="stylesheet" href="/css/moleculer.css">
  <!-- endbuild -->
  <link href="//fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700|Roboto Mono|Lato:300,400,700" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
  <!-- RSS
  <link rel="alternate" href="/atom.xml" title="Moleculer Go - Progressive microservices framework in Go">
  -->
  <!-- Open Graph -->
  <meta name="description" content="To communicate other nodes (ServiceBrokers), you need to configure a transporter. The most transporters connect to a central message broker server which is liable for message transferring among nodes.">
<meta property="og:type" content="website">
<meta property="og:title" content="Networking">
<meta property="og:url" content="https://gomicro.services/docs/0.1/networking.html">
<meta property="og:site_name" content="Moleculer Go - Progressive microservices framework in Go">
<meta property="og:description" content="To communicate other nodes (ServiceBrokers), you need to configure a transporter. The most transporters connect to a central message broker server which is liable for message transferring among nodes.">
<meta property="og:locale" content="en">
<meta property="og:image" content="https://gomicro.services/docs/0.1/assets/networking.svg">
<meta property="og:image" content="https://img.shields.io/badge/status-experimental-orange.svg">
<meta property="og:image" content="https://img.shields.io/badge/status-stable-green.svg">
<meta property="og:image" content="https://img.shields.io/badge/status-stable-green.svg">
<meta property="og:image" content="https://img.shields.io/badge/status-stable-green.svg">
<meta property="og:image" content="https://img.shields.io/badge/status-stable-green.svg">
<meta property="og:image" content="https://img.shields.io/badge/status-experimental-orange.svg">
<meta property="og:image" content="https://img.shields.io/badge/status-experimental-orange.svg">
<meta property="og:updated_time" content="2019-03-22T03:42:18.004Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Networking">
<meta name="twitter:description" content="To communicate other nodes (ServiceBrokers), you need to configure a transporter. The most transporters connect to a central message broker server which is liable for message transferring among nodes.">
<meta name="twitter:image" content="https://gomicro.services/docs/0.1/assets/networking.svg">
<meta name="twitter:site" content="MoleculerG">
  <!-- Google Analytics -->
  
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-99099811-1', 'auto');
  ga('send', 'pageview');
</script>


  <!-- Particles -->
  <script src="/js/buttons.js"></script>

</head>

<body>
  <div id="particles-js"></div>
  <header id="header" class="wrapper">
  <div id="header-inner" class="inner">
    <h1 id="logo-wrap">
      <a href="/" id="logo">Moleculer</a>
    </h1>
    <nav id="main-nav">
      <a href="/docs/0.1/" class="main-nav-link">Documentation</a><a href="/modules.html" class="main-nav-link">Modules</a><a href="/support.html" class="main-nav-link">Support</a>
      <a href="https://github.com/moleculer-go/moleculer" class="main-nav-link">Github</a>
      <a href="https://gitter.im/moleculer-go/moleculer" class="main-nav-link">Chat</a>
      <a href="https://medium.com/moleculer" class="main-nav-link">Blog</a>
      <div id="search-input-wrap" class="on">
        <div id="search-input-icon">
          <i class="fa fa-search"></i>
        </div>
        <input type="search" id="search-input" placeholder="Search...">
      </div>
    </nav>
    <div id="lang-select-wrap" style="display: none">
      <label id="lang-select-label"><i class="fa fa-globe"></i><span>English</span></label>
      <select id="lang-select" data-canonical="">
        
          <option value="en" selected>English</option>
        
      </select>
    </div>
    <a id="mobile-nav-toggle">
      <span class="mobile-nav-toggle-bar"></span>
      <span class="mobile-nav-toggle-bar"></span>
      <span class="mobile-nav-toggle-bar"></span>
    </a>
  </div>
</header>

  <div id="container">
    <div id="content-wrap">
  <div id="content" class="wrapper">
    <div id="content-inner">
      <article class="article-container" itemscope itemtype="http://schema.org/Article">
        <div class="article-inner">
          <div class="article">
            <div class="inner">
              <header class="article-header">
                <h1 class="article-title" itemprop="name">Networking</h1>
                <a href="https://github.com/moleculer-go/site/edit/master/source/docs/0.1/networking.md" class="article-edit-link" title="Improve this doc"><i class="fa fa-pencil"></i></a>
              </header>
              <div class="article-content" itemprop="articleBody">
                <p>To communicate other nodes (ServiceBrokers), you need to configure a transporter. The most transporters connect to a central message broker server which is liable for message transferring among nodes. These message brokers mainly support publish/subscribe messaging pattern.</p>
<div align="center"><br><img src="assets/networking.svg" alt="Networking diagram"><br></div>

<h2 id="Transporters" class="article-heading"><a href="#Transporters" class="headerlink" title="Transporters"></a>Transporters<a class="article-anchor" href="#Transporters" aria-hidden="true"></a></h2><p>Transporter is an important module if you are running services on multiple nodes. Transporter communicates with other nodes. It transfers events, calls requests and processes responses …etc. If a service runs on multiple instances on different nodes, the requests will be load-balanced among live nodes.</p>
<p>The whole communication logic is outside of transporter class. It means switching between transporters without changing any lines of our code is easy.</p>
<p>There are several built-in transporters in Moleculer framework.</p>
<h3 id="TCP-transporter" class="article-heading"><a href="#TCP-transporter" class="headerlink" title="TCP transporter"></a>TCP transporter<a class="article-anchor" href="#TCP-transporter" aria-hidden="true"></a></h3><p><img src="https://img.shields.io/badge/status-experimental-orange.svg" alt="Experimental transporter"><br>This is a no-dependency, zero-configuration TCP transporter. It uses <a href="https://en.wikipedia.org/wiki/Gossip_protocol" target="_blank" rel="noopener">Gossip protocol</a> to disseminate node statuses, service list and heartbeats. It contains an integrated UDP discovery feature to detect new and disconnected nodes on the network.<br>If the UDP is prohibited on your network, use <code>urls</code> option. It is a list of remote endpoints (host/ip, port, nodeID). It can be a static list in your configuration or a file path which contains the list.</p>
<blockquote>
<p>Please note, it is an <strong>experimental</strong> transporter. <strong>Do not use it in production yet!</strong></p>
</blockquote>
<!-- **This TCP transporter is the default transporter in Moleculer**.
It means, you don't have to configure any transporter, just start the brokers/nodes, use same namespaces and the nodes will find each others.
>If you don't want to use transporter, set `transporter: null` in broker options.
-->
<p><strong>Use TCP transporter with default options</strong><br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> broker = <span class="keyword">new</span> ServiceBroker(&#123;</span><br><span class="line">    transporter: <span class="string">"TCP"</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p><strong>All TCP transporter options with default values</strong><br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> broker = <span class="keyword">new</span> ServiceBroker(&#123;</span><br><span class="line">    logger: <span class="literal">true</span>,</span><br><span class="line">    transporter: &#123;</span><br><span class="line">        type: <span class="string">"TCP"</span>,</span><br><span class="line">        options: &#123;</span><br><span class="line">            <span class="comment">// Enable UDP discovery</span></span><br><span class="line">            udpDiscovery: <span class="literal">true</span>,</span><br><span class="line">            <span class="comment">// Reusing UDP server socket</span></span><br><span class="line">            udpReuseAddr: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">            <span class="comment">// UDP port</span></span><br><span class="line">            udpPort: <span class="number">4445</span>,</span><br><span class="line">            <span class="comment">// UDP bind address (if null, bind on all interfaces)</span></span><br><span class="line">            udpBindAddress: <span class="literal">null</span>,</span><br><span class="line">            <span class="comment">// UDP sending period (seconds)</span></span><br><span class="line">            udpPeriod: <span class="number">30</span>,</span><br><span class="line"></span><br><span class="line">            <span class="comment">// Multicast address.</span></span><br><span class="line">            udpMulticast: <span class="string">"239.0.0.0"</span>,</span><br><span class="line">            <span class="comment">// Multicast TTL setting</span></span><br><span class="line">            udpMulticastTTL: <span class="number">1</span>,</span><br><span class="line"></span><br><span class="line">            <span class="comment">// Send broadcast (Boolean, String, Array&lt;String&gt;)</span></span><br><span class="line">            udpBroadcast: <span class="literal">false</span>,</span><br><span class="line"></span><br><span class="line">            <span class="comment">// TCP server port. Null or 0 means random port</span></span><br><span class="line">            port: <span class="literal">null</span>,</span><br><span class="line">            <span class="comment">// Static remote nodes address list (when UDP discovery is not available)</span></span><br><span class="line">            urls: <span class="literal">null</span>,</span><br><span class="line">            <span class="comment">// Use hostname as preffered connection address</span></span><br><span class="line">            useHostname: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">            <span class="comment">// Gossip sending period in seconds</span></span><br><span class="line">            gossipPeriod: <span class="number">2</span>,</span><br><span class="line">            <span class="comment">// Maximum enabled outgoing connections. If reach, close the old connections</span></span><br><span class="line">            maxConnections: <span class="number">32</span>,</span><br><span class="line">            <span class="comment">// Maximum TCP packet size</span></span><br><span class="line">            maxPacketSize: <span class="number">1</span> * <span class="number">1024</span> * <span class="number">1024</span>            </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p><strong>TCP transporter with static endpoint list</strong><br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> broker = <span class="keyword">new</span> ServiceBroker(&#123;</span><br><span class="line">    nodeID: <span class="string">"node-1"</span>,</span><br><span class="line">    logger: <span class="literal">true</span>,</span><br><span class="line">    transporter: &#123;</span><br><span class="line">        type: <span class="string">"TCP"</span>,</span><br><span class="line">        options: &#123;</span><br><span class="line">            udpDiscovery: <span class="literal">false</span>,</span><br><span class="line">            urls: [</span><br><span class="line">                <span class="string">"172.17.0.1:6000/node-1"</span>,</span><br><span class="line">                <span class="string">"172.17.0.2:6000/node-2"</span>,</span><br><span class="line">                <span class="string">"172.17.0.3:6000/node-3"</span>                </span><br><span class="line">            ],</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p><em>You don’t need to set <code>port</code> because it find &amp; parse the self TCP port from URL list.</em></p>
<p><strong>TCP transporter with shorthand static endpoint list</strong><br>It needs to start with <code>tcp://</code>.<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> broker = <span class="keyword">new</span> ServiceBroker(&#123;</span><br><span class="line">    nodeID: <span class="string">"node-1"</span>,</span><br><span class="line">    transporter: <span class="string">"tcp://172.17.0.1:6000/node-1,172.17.0.2:6000/node-2,172.17.0.3:6000/node-3"</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p><strong>TCP transporter with static endpoint list file</strong><br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> broker = <span class="keyword">new</span> ServiceBroker(&#123;</span><br><span class="line">    nodeID: <span class="string">"node-1"</span>,</span><br><span class="line">    transporter: <span class="string">"file://./nodes.json"</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// nodes.json</span></span><br><span class="line">[</span><br><span class="line">	<span class="string">"127.0.0.1:6001/client-1"</span>,</span><br><span class="line">	<span class="string">"127.0.0.1:7001/server-1"</span>,</span><br><span class="line">	<span class="string">"127.0.0.1:7002/server-2"</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<blockquote class="note info"><strong class="note-title">Serviceless node</strong><p>Please note, you don’t need to list all remote nodes. It’s enough at least one node which is online. For example, create a “serviceless” gossiper node, which does nothing, just shares other remote nodes addresses by gossip messages. So all nodes must know only the gossiper node address to be able to communicate with all other nodes.</p>
</blockquote>
<h3 id="NATS-Transporter" class="article-heading"><a href="#NATS-Transporter" class="headerlink" title="NATS Transporter"></a>NATS Transporter<a class="article-anchor" href="#NATS-Transporter" aria-hidden="true"></a></h3><p><img src="https://img.shields.io/badge/status-stable-green.svg" alt="Stable transporter"><br>Built-in transporter for <a href="http://nats.io/" target="_blank" rel="noopener">NATS</a>.</p>
<blockquote>
<p>NATS Server is a simple, high performance open source messaging system for cloud-native applications, IoT messaging, and microservices architectures.</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123; ServiceBroker &#125; = <span class="built_in">require</span>(<span class="string">"moleculer"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> broker = <span class="keyword">new</span> ServiceBroker(&#123;</span><br><span class="line">    nodeID: <span class="string">"server-1"</span>,</span><br><span class="line">    transporter: <span class="string">"nats://nats.server:4222"</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<blockquote class="note info"><strong class="note-title">Dependencies</strong><p>To use this transporter install the <code>nats</code> module with <code>npm install nats --save</code> command.</p>
</blockquote>
<h4 id="Examples" class="article-heading"><a href="#Examples" class="headerlink" title="Examples"></a>Examples<a class="article-anchor" href="#Examples" aria-hidden="true"></a></h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Connect to 'nats://localhost:4222'</span></span><br><span class="line"><span class="keyword">const</span> broker = <span class="keyword">new</span> ServiceBroker(&#123;</span><br><span class="line">    transporter: <span class="string">"NATS"</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Connect to a remote NATS server</span></span><br><span class="line"><span class="keyword">const</span> broker = <span class="keyword">new</span> ServiceBroker(&#123;</span><br><span class="line">    transporter: <span class="string">"nats://nats-server:4222"</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Connect with options</span></span><br><span class="line"><span class="keyword">const</span> broker = <span class="keyword">new</span> ServiceBroker(&#123;</span><br><span class="line">    transporter: &#123;</span><br><span class="line">        type: <span class="string">"NATS"</span>,</span><br><span class="line">        options: &#123;</span><br><span class="line">            url: <span class="string">"nats://localhost:4222"</span></span><br><span class="line">            user: <span class="string">"admin"</span>,</span><br><span class="line">            pass: <span class="string">"1234"</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Connect with TLS</span></span><br><span class="line"><span class="keyword">const</span> broker = <span class="keyword">new</span> ServiceBroker(&#123;</span><br><span class="line">    transporter: &#123;</span><br><span class="line">        type: <span class="string">"NATS"</span>,</span><br><span class="line">        options: &#123;</span><br><span class="line">            url: <span class="string">"nats://localhost:4222"</span></span><br><span class="line">            <span class="comment">// More info: https://github.com/nats-io/node-nats#tls</span></span><br><span class="line">            tls: &#123;</span><br><span class="line">                key: fs.readFileSync(<span class="string">'./client-key.pem'</span>),</span><br><span class="line">                cert: fs.readFileSync(<span class="string">'./client-cert.pem'</span>),</span><br><span class="line">                ca: [ fs.readFileSync(<span class="string">'./ca.pem'</span>) ]</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="Redis-Transporter" class="article-heading"><a href="#Redis-Transporter" class="headerlink" title="Redis Transporter"></a>Redis Transporter<a class="article-anchor" href="#Redis-Transporter" aria-hidden="true"></a></h3><p><img src="https://img.shields.io/badge/status-stable-green.svg" alt="Stable transporter"><br>Built-in transporter for <a href="http://redis.io/" target="_blank" rel="noopener">Redis</a>.</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123; ServiceBroker &#125; = <span class="built_in">require</span>(<span class="string">"moleculer"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> broker = <span class="keyword">new</span> ServiceBroker(&#123;</span><br><span class="line">    nodeID: <span class="string">"server-1"</span>,</span><br><span class="line">    transporter: <span class="string">"redis://redis.server:6379"</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<blockquote class="note info"><strong class="note-title">Dependencies</strong><p>To use this transporter install the <code>ioredis</code> module with <code>npm install ioredis --save</code> command.</p>
</blockquote>
<h4 id="Examples-1" class="article-heading"><a href="#Examples-1" class="headerlink" title="Examples"></a>Examples<a class="article-anchor" href="#Examples-1" aria-hidden="true"></a></h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Connect with default settings</span></span><br><span class="line"><span class="keyword">const</span> broker = <span class="keyword">new</span> ServiceBroker(&#123;</span><br><span class="line">    transporter: <span class="string">"Redis"</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Connect with connection string</span></span><br><span class="line"><span class="keyword">const</span> broker = <span class="keyword">new</span> ServiceBroker(&#123;</span><br><span class="line">    transporter: <span class="string">"redis://localhost:6379"</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Connect with options</span></span><br><span class="line"><span class="keyword">const</span> broker = <span class="keyword">new</span> ServiceBroker(&#123;</span><br><span class="line">    transporter: &#123;</span><br><span class="line">        type: <span class="string">"Redis"</span>,</span><br><span class="line">        options: &#123;</span><br><span class="line">            host: <span class="string">"redis-server"</span>,</span><br><span class="line">            db: <span class="number">0</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="MQTT-Transporter" class="article-heading"><a href="#MQTT-Transporter" class="headerlink" title="MQTT Transporter"></a>MQTT Transporter<a class="article-anchor" href="#MQTT-Transporter" aria-hidden="true"></a></h3><p><img src="https://img.shields.io/badge/status-stable-green.svg" alt="Stable transporter"><br>Built-in transporter for <a href="http://mqtt.org/" target="_blank" rel="noopener">MQTT</a> protocol <em>(e.g.: <a href="https://mosquitto.org/" target="_blank" rel="noopener">Mosquitto</a>)</em>.</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123; ServiceBroker &#125; = <span class="built_in">require</span>(<span class="string">"moleculer"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> broker = <span class="keyword">new</span> ServiceBroker(&#123;</span><br><span class="line">    nodeID: <span class="string">"server-1"</span>,</span><br><span class="line">    transporter: <span class="string">"mqtt://mqtt-server:1883"</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<blockquote class="note info"><strong class="note-title">Dependencies</strong><p>To use this transporter install the <code>mqtt</code> module with <code>npm install mqtt --save</code> command.</p>
</blockquote>
<h4 id="Examples-2" class="article-heading"><a href="#Examples-2" class="headerlink" title="Examples"></a>Examples<a class="article-anchor" href="#Examples-2" aria-hidden="true"></a></h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Connect with default settings</span></span><br><span class="line"><span class="keyword">const</span> broker = <span class="keyword">new</span> ServiceBroker(&#123;</span><br><span class="line">    transporter: <span class="string">"MQTT"</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Connect with connection string</span></span><br><span class="line"><span class="keyword">const</span> broker = <span class="keyword">new</span> ServiceBroker(&#123;</span><br><span class="line">    transporter: <span class="string">"mqtt://mqtt-server:1883"</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Connect with options</span></span><br><span class="line"><span class="keyword">const</span> broker = <span class="keyword">new</span> ServiceBroker(&#123;</span><br><span class="line">    transporter: &#123;</span><br><span class="line">        type: <span class="string">"MQTT"</span>,</span><br><span class="line">        options: &#123;</span><br><span class="line">            host: <span class="string">"mqtt-server"</span>,</span><br><span class="line">            port: <span class="number">1883</span>,</span><br><span class="line">            qos: <span class="number">0</span>,</span><br><span class="line">            topicSeparator: <span class="string">"."</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="AMQP-Transporter" class="article-heading"><a href="#AMQP-Transporter" class="headerlink" title="AMQP Transporter"></a>AMQP Transporter<a class="article-anchor" href="#AMQP-Transporter" aria-hidden="true"></a></h3><p><img src="https://img.shields.io/badge/status-stable-green.svg" alt="Stable transporter"><br>Built-in transporter for <a href="https://www.amqp.org/" target="_blank" rel="noopener">AMQP</a> protocol <em>(e.g.: <a href="https://www.rabbitmq.com/" target="_blank" rel="noopener">RabbitMQ</a>)</em>.</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123; ServiceBroker &#125; = <span class="built_in">require</span>(<span class="string">"moleculer"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> broker = <span class="keyword">new</span> ServiceBroker(&#123;</span><br><span class="line">    nodeID: <span class="string">"server-1"</span>,</span><br><span class="line">    transporter: <span class="string">"amqp://rabbitmq-server:5672"</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<blockquote class="note info"><strong class="note-title">Dependencies</strong><p>To use this transporter install the <code>amqplib</code> module with <code>npm install amqplib --save</code> command.</p>
</blockquote>
<h4 id="Transporter-options" class="article-heading"><a href="#Transporter-options" class="headerlink" title="Transporter options"></a>Transporter options<a class="article-anchor" href="#Transporter-options" aria-hidden="true"></a></h4><p>Options can be passed to <code>amqp.connect()</code> method.</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Connect to 'amqp://guest:guest@localhost:5672'</span></span><br><span class="line"><span class="keyword">const</span> broker = <span class="keyword">new</span> ServiceBroker(&#123;</span><br><span class="line">    transporter: <span class="string">"AMQP"</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Connect to a remote server</span></span><br><span class="line"><span class="keyword">const</span> broker = <span class="keyword">new</span> ServiceBroker(&#123;</span><br><span class="line">    transporter: <span class="string">"amqp://rabbitmq-server:5672"</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Connect to a remote server with options &amp; credentials</span></span><br><span class="line"><span class="keyword">const</span> broker = <span class="keyword">new</span> ServiceBroker(&#123;</span><br><span class="line">    transporter: &#123;</span><br><span class="line">        type: <span class="string">"AMQP"</span>,</span><br><span class="line">        options: &#123;</span><br><span class="line">            url: <span class="string">"amqp://user:pass@rabbitmq-server:5672"</span>,</span><br><span class="line">            eventTimeToLive: <span class="number">5000</span>,</span><br><span class="line">            prefetch: <span class="number">1</span>,</span><br><span class="line">            socketOptions: &#123;</span><br><span class="line">                servername: process.env.RABBIT_SERVER_NAME</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// If true, queues will be autodeleted once service is stopped, i.e., queue listener is removed</span></span><br><span class="line">            autoDeleteQueues: <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="Kafka-Transporter" class="article-heading"><a href="#Kafka-Transporter" class="headerlink" title="Kafka Transporter"></a>Kafka Transporter<a class="article-anchor" href="#Kafka-Transporter" aria-hidden="true"></a></h3><p><img src="https://img.shields.io/badge/status-experimental-orange.svg" alt="Experimental transporter"><br>Built-in transporter for <a href="https://kafka.apache.org/" target="_blank" rel="noopener">Kafka</a>. It is a very simple implementation. It transfers Moleculer packets to consumers via pub/sub. There are not implemented offset, replay…etc features.</p>
<blockquote>
<p>Please note, it is an <strong>experimental</strong> transporter. <strong>Do not use it in production yet!</strong></p>
</blockquote>
<blockquote class="note info"><strong class="note-title">Dependencies</strong><p>To use this transporter install the <code>kafka-node</code> module with <code>npm install kafka-node --save</code> command.</p>
</blockquote>
<p><strong>Connect to Zookeeper</strong><br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> broker = <span class="keyword">new</span> ServiceBroker(&#123;</span><br><span class="line">    logger: <span class="literal">true</span>,</span><br><span class="line">    transporter: <span class="string">"kafka://192.168.51.29:2181"</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p><strong>Connect to Zookeeper with custom options</strong><br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> broker = <span class="keyword">new</span> ServiceBroker(&#123;</span><br><span class="line">    logger: <span class="literal">true</span>,</span><br><span class="line">    transporter: &#123;</span><br><span class="line">        type: <span class="string">"kafka"</span>,</span><br><span class="line">        options: &#123;</span><br><span class="line">            host: <span class="string">"192.168.51.29:2181"</span>,</span><br><span class="line"></span><br><span class="line">            <span class="comment">// KafkaClient options. More info: https://github.com/SOHU-Co/kafka-node#clientconnectionstring-clientid-zkoptions-noackbatchoptions-ssloptions</span></span><br><span class="line">            client: &#123;</span><br><span class="line">                zkOptions: <span class="literal">undefined</span>,</span><br><span class="line">                noAckBatchOptions: <span class="literal">undefined</span>,</span><br><span class="line">                sslOptions: <span class="literal">undefined</span></span><br><span class="line">            &#125;,</span><br><span class="line"></span><br><span class="line">            <span class="comment">// KafkaProducer options. More info: https://github.com/SOHU-Co/kafka-node#producerclient-options-custompartitioner</span></span><br><span class="line">            producer: &#123;&#125;,</span><br><span class="line">            customPartitioner: <span class="literal">undefined</span>,</span><br><span class="line"></span><br><span class="line">            <span class="comment">// ConsumerGroup options. More info: https://github.com/SOHU-Co/kafka-node#consumergroupoptions-topics</span></span><br><span class="line">            consumer: &#123;</span><br><span class="line">            &#125;,</span><br><span class="line"></span><br><span class="line">            <span class="comment">// Advanced options for `send`. More info: https://github.com/SOHU-Co/kafka-node#sendpayloads-cb</span></span><br><span class="line">            publish: &#123;</span><br><span class="line">                partition: <span class="number">0</span>,</span><br><span class="line">                attributes: <span class="number">0</span></span><br><span class="line">            &#125;               </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<h3 id="NATS-Streaming-STAN-Transporter" class="article-heading"><a href="#NATS-Streaming-STAN-Transporter" class="headerlink" title="NATS Streaming (STAN) Transporter"></a>NATS Streaming (STAN) Transporter<a class="article-anchor" href="#NATS-Streaming-STAN-Transporter" aria-hidden="true"></a></h3><p><img src="https://img.shields.io/badge/status-experimental-orange.svg" alt="Experimental transporter"><br>Built-in transporter for <a href="https://nats.io/documentation/streaming/nats-streaming-intro/" target="_blank" rel="noopener">NATS Streaming</a>. It is a very simple implementation. It transfers Moleculer packets to consumers via pub/sub. There are not implemented offset, replay…etc features.</p>
<blockquote>
<p>Please note, it is an <strong>experimental</strong> transporter. <strong>Do not use it in production yet!</strong></p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123; ServiceBroker &#125; = <span class="built_in">require</span>(<span class="string">"moleculer"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> broker = <span class="keyword">new</span> ServiceBroker(&#123;</span><br><span class="line">    nodeID: <span class="string">"server-1"</span>,</span><br><span class="line">    transporter: <span class="string">"stan://nats-streaming-server:4222"</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<blockquote class="note info"><strong class="note-title">Dependencies</strong><p>To use this transporter install the <code>node-nats-streaming</code> module with <code>npm install node-nats-streaming --save</code> command.</p>
</blockquote>
<h4 id="Examples-3" class="article-heading"><a href="#Examples-3" class="headerlink" title="Examples"></a>Examples<a class="article-anchor" href="#Examples-3" aria-hidden="true"></a></h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Connect with default settings</span></span><br><span class="line"><span class="keyword">const</span> broker = <span class="keyword">new</span> ServiceBroker(&#123;</span><br><span class="line">    transporter: <span class="string">"STAN"</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Connect with connection string</span></span><br><span class="line"><span class="keyword">const</span> broker = <span class="keyword">new</span> ServiceBroker(&#123;</span><br><span class="line">    transporter: <span class="string">"stan://nats-streaming-server:4222"</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Connect with options</span></span><br><span class="line"><span class="keyword">const</span> broker = <span class="keyword">new</span> ServiceBroker(&#123;</span><br><span class="line">    transporter: &#123;</span><br><span class="line">        type: <span class="string">"STAN"</span>,</span><br><span class="line">        options: &#123;</span><br><span class="line">            url: <span class="string">"stan://127.0.0.1:4222"</span>,</span><br><span class="line">            clusterID: <span class="string">"my-cluster"</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="Custom-transporter" class="article-heading"><a href="#Custom-transporter" class="headerlink" title="Custom transporter"></a>Custom transporter<a class="article-anchor" href="#Custom-transporter" aria-hidden="true"></a></h3><p>Custom transporter module can be created. We recommend to copy the source of <a href="https://github.com/moleculer-go/moleculer/blob/master/src/transporters/nats.js" target="_blank" rel="noopener">NatsTransporter</a> and implement the <code>connect</code>, <code>disconnect</code>, <code>subscribe</code> and <code>publish</code> methods.</p>
<h4 id="Create-custom-transporter" class="article-heading"><a href="#Create-custom-transporter" class="headerlink" title="Create custom transporter"></a>Create custom transporter<a class="article-anchor" href="#Create-custom-transporter" aria-hidden="true"></a></h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> BaseTransporter = <span class="built_in">require</span>(<span class="string">"moleculer"</span>).Transporters.Base;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyTransporter</span> <span class="keyword">extends</span> <span class="title">BaseTransporter</span> </span>&#123;</span><br><span class="line">    connect() &#123; <span class="comment">/*...*/</span> &#125;</span><br><span class="line">    disconnect() &#123; <span class="comment">/*...*/</span> &#125;</span><br><span class="line">    subscribe() &#123; <span class="comment">/*...*/</span> &#125;</span><br><span class="line">    publish() &#123; <span class="comment">/*...*/</span> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Use-custom-transporter" class="article-heading"><a href="#Use-custom-transporter" class="headerlink" title="Use custom transporter"></a>Use custom transporter<a class="article-anchor" href="#Use-custom-transporter" aria-hidden="true"></a></h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; ServiceBroker &#125; = <span class="built_in">require</span>(<span class="string">"moleculer"</span>);</span><br><span class="line"><span class="keyword">const</span> MyTransporter = <span class="built_in">require</span>(<span class="string">"./my-transporter"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> broker = <span class="keyword">new</span> ServiceBroker(&#123;</span><br><span class="line">    transporter: <span class="keyword">new</span> MyTransporter()</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="Disabled-balancer" class="article-heading"><a href="#Disabled-balancer" class="headerlink" title="Disabled balancer"></a>Disabled balancer<a class="article-anchor" href="#Disabled-balancer" aria-hidden="true"></a></h2><p>Some transporter servers have built-in balancer solution. E.g.: RabbitMQ, NATS, NATS-Streaming. If you want to use the transporter balancer instead of Moleculer balancer, set the <code>disableBalancer</code> broker option to <code>true</code>.</p>
<p><strong>Example</strong><br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> broker = <span class="keyword">new</span> ServiceBroker(&#123;</span><br><span class="line">    disableBalancer: <span class="literal">true</span>,</span><br><span class="line">    transporter: <span class="string">"nats://some-server:4222"</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<blockquote class="note info"><strong class="note-title">Please note</strong><p>If you disable the built-in Moleculer balancer, all requests &amp; events will be transferred via transporter (including local requests). E.g. you have a local math service and you call <code>math.add</code> locally, the request will be sent via transporter.</p>
</blockquote>
<h2 id="Serialization" class="article-heading"><a href="#Serialization" class="headerlink" title="Serialization"></a>Serialization<a class="article-anchor" href="#Serialization" aria-hidden="true"></a></h2><p>Transporter needs a serializer module which serializes &amp; deserializes the transferred packets. The default serializer is the <code>JSONSerializer</code> but there are several built-in serializer.</p>
<p><strong>Example</strong><br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; ServiceBroker &#125; = <span class="built_in">require</span>(<span class="string">"moleculer"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> broker = <span class="keyword">new</span> ServiceBroker(&#123;</span><br><span class="line">    nodeID: <span class="string">"server-1"</span>,</span><br><span class="line">    transporter: <span class="string">"NATS"</span>,</span><br><span class="line">    serializer: <span class="string">"ProtoBuf"</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<h3 id="JSON-serializer" class="article-heading"><a href="#JSON-serializer" class="headerlink" title="JSON serializer"></a>JSON serializer<a class="article-anchor" href="#JSON-serializer" aria-hidden="true"></a></h3><p>This is the built-in default serializer. It serializes the packets to JSON string and deserializes the received data to packet.</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> broker = <span class="keyword">new</span> ServiceBroker(&#123;</span><br><span class="line">    <span class="comment">// serializer: "JSON" // don't need to set, because it is the default</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="Avro-serializer" class="article-heading"><a href="#Avro-serializer" class="headerlink" title="Avro serializer"></a>Avro serializer<a class="article-anchor" href="#Avro-serializer" aria-hidden="true"></a></h3><p>Built-in <a href="https://github.com/mtth/avsc" target="_blank" rel="noopener">Avro</a> serializer.</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> broker = <span class="keyword">new</span> ServiceBroker(&#123;</span><br><span class="line">    serializer: <span class="string">"Avro"</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<blockquote class="note info"><strong class="note-title">Dependencies</strong><p>To use this serializer install the <code>avsc</code> module with <code>npm install avsc --save</code> command.</p>
</blockquote>
<h3 id="MsgPack-serializer" class="article-heading"><a href="#MsgPack-serializer" class="headerlink" title="MsgPack serializer"></a>MsgPack serializer<a class="article-anchor" href="#MsgPack-serializer" aria-hidden="true"></a></h3><p>Built-in <a href="https://github.com/mcollina/msgpack5" target="_blank" rel="noopener">MsgPack</a> serializer.</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> broker = <span class="keyword">new</span> ServiceBroker(&#123;</span><br><span class="line">    serializer: <span class="string">"MsgPack"</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<blockquote class="note info"><strong class="note-title">Dependencies</strong><p>To use this serializer install the <code>msgpack5</code> module with <code>npm install msgpack5 --save</code> command.</p>
</blockquote>
<h3 id="Notepack-serializer" class="article-heading"><a href="#Notepack-serializer" class="headerlink" title="Notepack serializer"></a>Notepack serializer<a class="article-anchor" href="#Notepack-serializer" aria-hidden="true"></a></h3><p>Built-in <a href="https://github.com/darrachequesne/notepack" target="_blank" rel="noopener">Notepack</a> serializer.</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> broker = <span class="keyword">new</span> ServiceBroker(&#123;</span><br><span class="line">    serializer: <span class="string">"Notepack"</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<blockquote class="note info"><strong class="note-title">Dependencies</strong><p>To use this serializer install the <code>notepack</code> module with <code>npm install notepack.io --save</code> command.</p>
</blockquote>
<h3 id="ProtoBuf-serializer" class="article-heading"><a href="#ProtoBuf-serializer" class="headerlink" title="ProtoBuf serializer"></a>ProtoBuf serializer<a class="article-anchor" href="#ProtoBuf-serializer" aria-hidden="true"></a></h3><p>Built-in <a href="https://developers.google.com/protocol-buffers/" target="_blank" rel="noopener">Protocol Buffer</a> serializer.</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> broker = <span class="keyword">new</span> ServiceBroker(&#123;</span><br><span class="line">    serializer: <span class="string">"ProtoBuf"</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<blockquote class="note info"><strong class="note-title">Dependencies</strong><p>To use this serializer install the <code>protobufjs</code> module with <code>npm install protobufjs --save</code> command.</p>
</blockquote>
<h3 id="Thrift-serializer" class="article-heading"><a href="#Thrift-serializer" class="headerlink" title="Thrift serializer"></a>Thrift serializer<a class="article-anchor" href="#Thrift-serializer" aria-hidden="true"></a></h3><p>Built-in <a href="http://thrift.apache.org/" target="_blank" rel="noopener">Thrift</a> serializer.</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> broker = <span class="keyword">new</span> ServiceBroker(&#123;</span><br><span class="line">    serializer: <span class="string">"Thrift"</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<blockquote class="note info"><strong class="note-title">Dependencies</strong><p>To use this serializer install the <code>thrift</code> module with <code>npm install thrift --save</code> command.</p>
</blockquote>
<h3 id="Custom-serializer" class="article-heading"><a href="#Custom-serializer" class="headerlink" title="Custom serializer"></a>Custom serializer<a class="article-anchor" href="#Custom-serializer" aria-hidden="true"></a></h3><p>Custom serializer module can be created. We recommend to copy the source of <a href="https://github.com/moleculer-go/moleculer/blob/master/src/serializers/json.js" target="_blank" rel="noopener">JSONSerializer</a> and implement the <code>serialize</code> and <code>deserialize</code> methods.</p>
<h4 id="Create-custom-serializer" class="article-heading"><a href="#Create-custom-serializer" class="headerlink" title="Create custom serializer"></a>Create custom serializer<a class="article-anchor" href="#Create-custom-serializer" aria-hidden="true"></a></h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> BaseSerializer = <span class="built_in">require</span>(<span class="string">"moleculer"</span>).Serializers.Base;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MySerializer</span> <span class="keyword">extends</span> <span class="title">BaseSerializer</span> </span>&#123;</span><br><span class="line">    serialize(obj, type) &#123; <span class="comment">/*...*/</span> &#125;</span><br><span class="line">    deserialize(buf, type) &#123; <span class="comment">/*...*/</span> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Use-custom-serializer" class="article-heading"><a href="#Use-custom-serializer" class="headerlink" title="Use custom serializer"></a>Use custom serializer<a class="article-anchor" href="#Use-custom-serializer" aria-hidden="true"></a></h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; ServiceBroker &#125; = <span class="built_in">require</span>(<span class="string">"moleculer"</span>);</span><br><span class="line"><span class="keyword">const</span> MySerializer = <span class="built_in">require</span>(<span class="string">"./my-serializer"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> broker = <span class="keyword">new</span> ServiceBroker(&#123;</span><br><span class="line">    serializer: <span class="keyword">new</span> MySerializer()</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
              </div>
              <footer class="article-footer">
                <time class="article-footer-updated" datetime="2019-03-22T03:42:18.004Z" itemprop="dateModified">Last updated: 2019-03-22</time>
                <a href="middlewares.html" class="article-footer-prev" title="Middlewares"><i class="fa fa-chevron-left"></i><span>Prev</span></a><a href="registry.html" class="article-footer-next" title="Discovery & Registry"><span>Next</span><i class="fa fa-chevron-right"></i></a>
              </footer>
              
            </div>
          </div>
          <aside id="article-toc" role="navigation">
            <div id="article-toc-inner">
              <strong class="sidebar-title">Contents</strong>
              <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Transporters"><span class="toc-text">Transporters</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#TCP-transporter"><span class="toc-text">TCP transporter</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#NATS-Transporter"><span class="toc-text">NATS Transporter</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Redis-Transporter"><span class="toc-text">Redis Transporter</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MQTT-Transporter"><span class="toc-text">MQTT Transporter</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AMQP-Transporter"><span class="toc-text">AMQP Transporter</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Kafka-Transporter"><span class="toc-text">Kafka Transporter</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#NATS-Streaming-STAN-Transporter"><span class="toc-text">NATS Streaming (STAN) Transporter</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Custom-transporter"><span class="toc-text">Custom transporter</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Disabled-balancer"><span class="toc-text">Disabled balancer</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Serialization"><span class="toc-text">Serialization</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#JSON-serializer"><span class="toc-text">JSON serializer</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Avro-serializer"><span class="toc-text">Avro serializer</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MsgPack-serializer"><span class="toc-text">MsgPack serializer</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Notepack-serializer"><span class="toc-text">Notepack serializer</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ProtoBuf-serializer"><span class="toc-text">ProtoBuf serializer</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Thrift-serializer"><span class="toc-text">Thrift serializer</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Custom-serializer"><span class="toc-text">Custom serializer</span></a></li></ol></li></ol>
              <a href="#" id="article-toc-top">Back to Top</a>
            </div>
          </aside>
        </div>
      </article>
      <aside id="sidebar" role="navigation">
  <div class="inner"><div class="version-selector"><select onchange="changeVersion(this)"><option value="docs/0.1"selected>v0.1</option></select></div><strong class="sidebar-title">Introduction</strong><a href="/docs/0.1/index.html" class="sidebar-link">What is Moleculer?</a><a href="/docs/0.1/usage.html" class="sidebar-link">Usage</a><a href="/docs/0.1/examples.html" class="sidebar-link">Examples</a><strong class="sidebar-title">Overview</strong><a href="/docs/0.1/broker.html" class="sidebar-link">Broker</a><a href="/docs/0.1/services.html" class="sidebar-link">Services</a><a href="/docs/0.1/actions.html" class="sidebar-link">Actions</a><a href="/docs/0.1/events.html" class="sidebar-link">Events</a><a href="/docs/0.1/lifecycle.html" class="sidebar-link">Lifecycles</a><a href="/docs/0.1/logging.html" class="sidebar-link">Logging</a><a href="/docs/0.1/middlewares.html" class="sidebar-link">Middlewares</a><a href="/docs/0.1/networking.html" class="sidebar-link current">Networking</a><a href="/docs/0.1/registry.html" class="sidebar-link">Discovery & Registry</a><a href="/docs/0.1/balancing.html" class="sidebar-link">Load balancing</a><a href="/docs/0.1/fault-tolerance.html" class="sidebar-link">Fault tolerance</a><a href="/docs/0.1/caching.html" class="sidebar-link">Caching</a><a href="/docs/0.1/validating.html" class="sidebar-link">Validating</a><a href="/docs/0.1/metrics.html" class="sidebar-link">Metrics & Tracing</a><a href="/docs/0.1/errors.html" class="sidebar-link">Errors</a><a href="/docs/0.1/runner.html" class="sidebar-link">Moleculer Runner</a><strong class="sidebar-title">Modules</strong><a href="/docs/0.1/moleculer-web.html" class="sidebar-link">API Gateway</a><a href="/docs/0.1/moleculer-repl.html" class="sidebar-link">REPL console</a><a href="/docs/0.1/moleculer-cli.html" class="sidebar-link">CLI Tool</a><a href="/docs/0.1/moleculer-db.html" class="sidebar-link">DB Adapters</a><a href="/modules.html" class="sidebar-link">All modules</a><strong class="sidebar-title">Miscellaneous</strong><a href="/docs/0.1/clustering.html" class="sidebar-link">Clustering</a><a href="/docs/0.1/deploying.html" class="sidebar-link">Deploying</a><a href="/docs/0.1/benchmark.html" class="sidebar-link">Benchmark</a><a href="/docs/0.1/faq.html" class="sidebar-link">FAQ</a><a href="/docs/0.1/contributing.html" class="sidebar-link">Contributing</a><strong class="sidebar-title">API</strong><a href="/docs/0.1/api/service-broker.html" class="sidebar-link">ServiceBroker</a><a href="/docs/0.1/api/service.html" class="sidebar-link">Service</a><a href="/docs/0.1/api/context.html" class="sidebar-link">Context</a><a href="/docs/0.1/api/protocol.html" class="sidebar-link">Protocol</a></div>
</aside>
    </div>
  </div>
</div>

    <footer id="footer" class="wrapper">
  <div class="inner">
    <div id="footer-copyright">
      Copyright &copy; 2018-2019 <a href="https://github.com/pentateu" target="_blank">MoleculerGO</a><br>
      Documentation licensed under <a href="http://creativecommons.org/licenses/by/4.0/" target="_blank">CC BY 4.0</a>.
    </div>
    <div id="footer-links">
      <a href="https://gitter.im/moleculer-go/moleculer" class="footer-link" target="_blank"><i class="fa fa-comments-o"></i></a>
      <a href="https://twitter.com/MoleculerG" class="footer-link" target="_blank"><i class="fa fa-twitter"></i></a>
      <a href="https://github.com/moleculer-go/moleculer" class="footer-link" target="_blank"><i class="fa fa-github-alt"></i></a>
      <a href="https://stackoverflow.com/questions/tagged/moleculer-go" class="footer-link" target="_blank"><i class="fa fa-stack-overflow"></i></a>
    </div>
  </div>
</footer>

  </div>
  <div id="mobile-nav-dimmer"></div>
  <nav id="mobile-nav">
  <div id="mobile-nav-inner">
    <ul id="mobile-nav-list">
      <a href="/docs/0.1/" class="mobile-nav-link">Documentation</a><a href="/modules.html" class="mobile-nav-link">Modules</a><a href="/support.html" class="mobile-nav-link">Support</a>
      <li class="mobile-nav-item">
        <a href="https://github.com/moleculer-go/moleculer" class="mobile-nav-link" rel="external" target="_blank">GitHub</a>
      </li>
    </ul>
    
      <div class="version-selector"><select onchange="changeVersion(this)"><option value="docs/0.1"selected>v0.1</option></select></div><strong class="mobile-nav-title">Introduction</strong><a href="/docs/0.1/index.html" class="mobile-nav-link">What is Moleculer?</a><a href="/docs/0.1/usage.html" class="mobile-nav-link">Usage</a><a href="/docs/0.1/examples.html" class="mobile-nav-link">Examples</a><strong class="mobile-nav-title">Overview</strong><a href="/docs/0.1/broker.html" class="mobile-nav-link">Broker</a><a href="/docs/0.1/services.html" class="mobile-nav-link">Services</a><a href="/docs/0.1/actions.html" class="mobile-nav-link">Actions</a><a href="/docs/0.1/events.html" class="mobile-nav-link">Events</a><a href="/docs/0.1/lifecycle.html" class="mobile-nav-link">Lifecycles</a><a href="/docs/0.1/logging.html" class="mobile-nav-link">Logging</a><a href="/docs/0.1/middlewares.html" class="mobile-nav-link">Middlewares</a><a href="/docs/0.1/networking.html" class="mobile-nav-link current">Networking</a><a href="/docs/0.1/registry.html" class="mobile-nav-link">Discovery & Registry</a><a href="/docs/0.1/balancing.html" class="mobile-nav-link">Load balancing</a><a href="/docs/0.1/fault-tolerance.html" class="mobile-nav-link">Fault tolerance</a><a href="/docs/0.1/caching.html" class="mobile-nav-link">Caching</a><a href="/docs/0.1/validating.html" class="mobile-nav-link">Validating</a><a href="/docs/0.1/metrics.html" class="mobile-nav-link">Metrics & Tracing</a><a href="/docs/0.1/errors.html" class="mobile-nav-link">Errors</a><a href="/docs/0.1/runner.html" class="mobile-nav-link">Moleculer Runner</a><strong class="mobile-nav-title">Modules</strong><a href="/docs/0.1/moleculer-web.html" class="mobile-nav-link">API Gateway</a><a href="/docs/0.1/moleculer-repl.html" class="mobile-nav-link">REPL console</a><a href="/docs/0.1/moleculer-cli.html" class="mobile-nav-link">CLI Tool</a><a href="/docs/0.1/moleculer-db.html" class="mobile-nav-link">DB Adapters</a><a href="/modules.html" class="mobile-nav-link">All modules</a><strong class="mobile-nav-title">Miscellaneous</strong><a href="/docs/0.1/clustering.html" class="mobile-nav-link">Clustering</a><a href="/docs/0.1/deploying.html" class="mobile-nav-link">Deploying</a><a href="/docs/0.1/benchmark.html" class="mobile-nav-link">Benchmark</a><a href="/docs/0.1/faq.html" class="mobile-nav-link">FAQ</a><a href="/docs/0.1/contributing.html" class="mobile-nav-link">Contributing</a><strong class="mobile-nav-title">API</strong><a href="/docs/0.1/api/service-broker.html" class="mobile-nav-link">ServiceBroker</a><a href="/docs/0.1/api/service.html" class="mobile-nav-link">Service</a><a href="/docs/0.1/api/context.html" class="mobile-nav-link">Context</a><a href="/docs/0.1/api/protocol.html" class="mobile-nav-link">Protocol</a>
    
  </div>
  <div id="mobile-lang-select-wrap">
    <span id="mobile-lang-select-label"><i class="fa fa-globe"></i><span>English</span></span>
    <select id="mobile-lang-select" data-canonical="">
      
        <option value="en" selected>English</option>
      
    </select>
  </div>
</nav>
  <!-- Scripts -->
<!-- build:js build/js/main.js -->
<script src="/js/lang_select.js"></script>
<script src="/js/version_select.js"></script>
<script src="/js/scrollingelement.js"></script>
<script src="/js/toc.js"></script>
<script src="/js/mobile_nav.js"></script>
<!-- endbuild -->
<script src="https://cdn.jsdelivr.net/retinajs/1.3.0/retina.min.js" async></script>

<!-- Algolia -->

<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script type="text/javascript"> docsearch({
apiKey: '7d5514b7c3e161a428f04f33ba1bdab4',
indexName: 'moleculer',
inputSelector: '#search-input',
algoliaOptions: { 'facetFilters': ["version:0.1"] },
debug: false // Set debug to true if you want to inspect the dropdown
});
</script>


<!-- fastclick -->
<script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
  FastClick.attach(document.body)
}, false)
</script>

<!-- Gitter Chat -->
<script>
  ((window.gitter = {}).chat = {}).options = {
    room: 'moleculer-go/moleculer'
  };
</script>
<script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async defer></script>
</body>
</html>